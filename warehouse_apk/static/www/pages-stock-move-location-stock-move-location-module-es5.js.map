{"version":3,"sources":["./src/app/pages/stock-move-location/stock-move-location.page.html","./src/app/pages/stock-move-location/stock-move-location.module.ts","./src/app/pages/stock-move-location/stock-move-location.page.scss","./src/app/pages/stock-move-location/stock-move-location.page.ts"],"names":[],"mappings":";;;;;;;;;AAAA,8dAA8d,yBAAyB,yGAAyG,6BAA6B,uBAAuB,6oBAA6oB,yBAAyB,+GAA+G,6BAA6B,4BAA4B,sRAAsR,gBAAgB,kyBAAkyB,yBAAyB,gFAAgF,iCAAiC,gFAAgF,sCAAsC,+HAA+H,oBAAoB,kJAAkJ,mBAAmB,mR;;;;;;;;;;;;;;;;;;;;;;;ACAzjG;AACM;AACF;AACU;AAEV;AAEsB;AAET;AAE1D,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,+EAAqB;KACjC;CACF,CAAC;AAYF;IAAA;IAA0C,CAAC;IAA9B,2BAA2B;QAVvC,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,0DAAW;gBACX,0DAAW;gBACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;gBAC7B,kEAAY;aACb;YACD,YAAY,EAAE,CAAC,+EAAqB,CAAC;SACtC,CAAC;OACW,2BAA2B,CAAG;IAAD,kCAAC;CAAA;AAAH;;;;;;;;;;;;AC5BxC,0CAA0C,gBAAgB,gDAAgD,gDAAgD,oBAAoB,GAAG,6CAA6C,2wB;;;;;;;;;;;;;;;;;;;;;;;ACA5K;AACT;AACQ;AACS;AACE;AACA;AAEnB;AAOzC;IAgBE,+BACU,IAAiB,EAClB,MAAc,EACd,SAA0B,EACzB,KAAmB,EACnB,KAAmB,EACnB,OAAgB;QALhB,SAAI,GAAJ,IAAI,CAAa;QAClB,WAAM,GAAN,MAAM,CAAQ;QACd,cAAS,GAAT,SAAS,CAAiB;QACzB,UAAK,GAAL,KAAK,CAAc;QACnB,UAAK,GAAL,KAAK,CAAc;QACnB,YAAO,GAAP,OAAO,CAAS;QApB1B,oBAAe,GAAmB,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;QAsBlF,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAC9B,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;QACnC,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC;IAChC,CAAC;IAED,wCAAQ,GAAR;QAAA,iBAUC;QATC,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,UAAC,IAAI;YAC/B,IAAI,IAAI,IAAE,KAAK,EAAE;gBACf,KAAI,CAAC,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;aACrC;YACD,KAAI,CAAC,cAAc,GAAG,KAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;QACvD,CAAC,CAAC;aACD,KAAK,CAAC,UAAC,KAAK;YACX,KAAI,CAAC,YAAY,CAAC,+BAA+B,EAAE,KAAK,CAAC,CAAC;QAC5D,CAAC,CAAC,CAAC;IACL,CAAC;IAED,oDAAoB,GAApB;QAAA,iBASC;QARC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;YACnC,IAAI,GAAG,EAAC;gBACN,KAAI,CAAC,eAAe,GAAG,GAAG,CAAC;aAC5B;QACH,CAAC,CAAC;aACD,KAAK,CAAC,UAAC,KAAK;YACX,KAAI,CAAC,YAAY,CAAC,8CAA8C,EAAE,KAAK,CAAC,CAAC;QAC3E,CAAC,CAAC,CAAC;IACL,CAAC;IAED,yCAAS,GAAT,UAAU,UAAU;QAClB,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,WAAW,GAAC,UAAU,CAAC,CAAC;IACpD,CAAC;IAED,gDAAgB,GAAhB,UAAiB,GAAW;QAC1B,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;QAC3B,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,6CAAa,GAAb,UAAc,GAAY;QACxB,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;IAC5B,CAAC;IAEK,4CAAY,GAAlB,UAAmB,MAAM,EAAE,KAAK;;;;;;wBAC9B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;wBACX,qBAAM,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gCACtC,MAAM,EAAE,MAAM;gCACd,SAAS,EAAE,KAAK;gCAChB,OAAO,EAAE,CAAC,IAAI,CAAC;6BAClB,CAAC;;wBAJI,KAAK,GAAG,SAIZ;wBACF,qBAAM,KAAK,CAAC,OAAO,EAAE;;wBAArB,SAAqB,CAAC;;;;;KACvB;IAED,wCAAQ,GAAR,UAAS,OAAO;QACd,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC;QAC3B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,YAAY,GAAG,uCAAuC,CAAC;IAC9D,CAAC;IAED,0CAAU,GAAV,UAAW,OAAO,EAAE,GAAG;QAAvB,iBAOC;QANC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;YAC5C,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YACvB,KAAI,CAAC,YAAY,GAAG,SAAS,CAAC;QAChC,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,KAAK;YACb,KAAI,CAAC,YAAY,CAAC,yCAAyC,EAAE,KAAK,CAAC,CAAC;QACtE,CAAC,CAAC,CAAC;IACL,CAAC;IAED,+CAAe,GAAf;QACE,IAAI,IAAI,CAAC,qBAAqB,IAAI,IAAI,EAAE;YACtC,IAAI,CAAC,eAAe,CAAC,aAAa,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;SAC3D;aAAM,IAAI,IAAI,CAAC,gBAAgB,IAAI,IAAI,EAAE;YACxC,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;SACtD;aAAM,IAAI,IAAI,CAAC,aAAa,EAAE;YAC7B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;SACzD;aAAM,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YAC5B,IAAI,CAAC,wBAAwB,EAAE,CAAC;SACjC;aAAM;YACL,IAAI,CAAC,6BAA6B,EAAE,CAAC;SACtC;IACH,CAAC;IAED,+CAAe,GAAf,UAAgB,IAAI;QAClB,IAAI,IAAI,IAAI,QAAQ,IAAI,IAAI,CAAC,gBAAgB,EAAE;YAC7C,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;YAC7B,IAAI,CAAC,YAAY,GAAG,0CAA0C,CAAC;SAChE;aAAM,IAAI,IAAI,IAAI,aAAa,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACzD,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;YAClC,IAAI,CAAC,YAAY,GAAG,2CAA2C,CAAC;SACjE;IACH,CAAC;IAED,+CAAe,GAAf,UAAgB,IAAI,EAAE,WAAW;QAAjC,iBAUC;QATC,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,EAAE,WAAW,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;YAClF,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YACvB,KAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;YAC9B,KAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;YACnC,KAAI,CAAC,YAAY,GAAG,SAAS,CAAC;QAChC,CAAC,CAAC;aACD,KAAK,CAAC,UAAC,KAAK;YACX,KAAI,CAAC,YAAY,CAAC,yCAAyC,EAAE,KAAK,CAAC,CAAC;QACtE,CAAC,CAAC,CAAC;IACL,CAAC;IAED,2CAAW,GAAX,UAAY,IAAI;QACd,IAAG,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,EAAE;YACtB,IAAI,CAAC,YAAY,CAAC,yCAAyC,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;SAC7E;aAAM;YACL,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,oBAAoB,CAAC,CAAC;YAC9C,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,yBAAyB,CAAC,CAAC;YACxD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;YACnC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,8BAA8B,CAAC,CAAC;SAC7D;IACH,CAAC;IAED,wDAAwB,GAAxB;QAAA,iBAQC;QAPC,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;YAClE,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YACvB,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC3B,CAAC,CAAC;aACD,KAAK,CAAC,UAAC,KAAK;YACX,KAAI,CAAC,YAAY,CAAC,kCAAkC,EAAE,KAAK,CAAC,CAAC;QAC/D,CAAC,CAAC,CAAC;IACL,CAAC;IAED,6DAA6B,GAA7B;QAAA,iBAQC;QAPC,IAAI,CAAC,KAAK,CAAC,6BAA6B,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,UAAC,IAAQ;YACvJ,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAChC,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC3B,CAAC,CAAC;aACD,KAAK,CAAC,UAAC,KAAK;YACX,KAAI,CAAC,YAAY,CAAC,iCAAiC,EAAE,KAAK,CAAC,CAAC;QAC9D,CAAC,CAAC,CAAC;IACL,CAAC;IAED,iDAAiB,GAAjB;QAAA,iBAOC;QANC,IAAI,CAAC,KAAK,CAAC,0BAA0B,CAAC,IAAI,CAAC,gBAAgB,EAAE,OAAO,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;YAC9E,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACzB,CAAC,CAAC;aACD,KAAK,CAAC,UAAC,KAAK;YACX,KAAI,CAAC,YAAY,CAAC,oCAAoC,EAAE,KAAK,CAAC,CAAC;QACjE,CAAC,CAAC,CAAC;IACL,CAAC;IAED,wDAAwB,GAAxB;QAAA,iBAOC;QANC,IAAI,CAAC,KAAK,CAAC,0BAA0B,CAAC,IAAI,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;YAC5E,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACzB,CAAC,CAAC;aACD,KAAK,CAAC,UAAC,KAAK;YACX,KAAI,CAAC,YAAY,CAAC,oCAAoC,EAAE,KAAK,CAAC,CAAC;QACjE,CAAC,CAAC,CAAC;IACL,CAAC;IAED,oDAAoB,GAApB;QAAA,iBAQC;QAPC,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;YAC/D,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAClB,KAAI,CAAC,MAAM,CAAC,aAAa,CAAC,iBAAiB,GAAC,IAAI,GAAC,WAAW,CAAC,CAAC;QAChE,CAAC,CAAC;aACD,KAAK,CAAC,UAAC,KAAK;YACX,KAAI,CAAC,YAAY,CAAC,iCAAiC,EAAE,KAAK,CAAC,CAAC;QAC9D,CAAC,CAAC,CAAC;IACL,CAAC;;gBAvKe,kEAAW;gBACV,sDAAM;gBACH,8DAAe;gBAClB,oEAAY;gBACZ,oEAAY;gBACV,sDAAO;;IAtBf,qBAAqB;QALjC,+DAAS,CAAC;YACT,QAAQ,EAAE,yBAAyB;YACnC,uLAA8C;;SAE/C,CAAC;+EAkBgB,kEAAW;YACV,sDAAM;YACH,8DAAe;YAClB,oEAAY;YACZ,oEAAY;YACV,sDAAO;OAtBf,qBAAqB,CA0LjC;IAAD,4BAAC;CAAA;AA1LiC;AA6LlC,wBAAwB;AAExB,6BAA6B","file":"pages-stock-move-location-stock-move-location-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <app-scanner-header slot=\\\"end\\\" (show_scan_form_changed)=\\\"onShowEmitted($event)\\\" [show_scan_form]=show_scan_form></app-scanner-header>\\n    <ion-title>Nuevo movimiento de stock</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-card>\\n    <ion-card-content>\\n      <ion-row>\\n        <ion-col [ngClass]=\\\"{'link': location_move_id}\\\" (click)=\\\"select_location('origin')\\\">\\n          <strong>Origen: </strong> <span *ngIf=\\\"location_id; else noLocationSelected\\\">{{ location_id['name'] }}</span>\\n        </ion-col>\\n        <ion-col>\\n          <ion-button size=\\\"small\\\" *ngIf=\\\"location_move_id && move_lines_info.length > 0\\\" class=\\\"button-text\\\" (click)=\\\"action_move_location()\\\">Enviar</ion-button>\\n          <ion-button size=\\\"small\\\" *ngIf=\\\"location_move_id && move_lines_info.length > 0\\\" class=\\\"button-text\\\" (click)=\\\"force_set_reserved_qties()\\\">Disponible</ion-button>\\n          <ion-button size=\\\"small\\\" *ngIf=\\\"location_move_id && move_lines_info.length > 0\\\" class=\\\"button-text\\\" (click)=\\\"force_reset_qties()\\\">Reset</ion-button>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col [ngClass]=\\\"{'link': location_move_id}\\\" (click)=\\\"select_location('destination')\\\">\\n          <strong>Destino: </strong> <span *ngIf=\\\"location_id; else noLocationSelected\\\">{{ location_dest_id['name'] }}</span>\\n        </ion-col>\\n      </ion-row>\\n    </ion-card-content>\\n    <ng-template #noLocationSelected>\\n      <span>Sin seleccionar</span>\\n    </ng-template>\\n  </ion-card>\\n\\n  <ion-card *ngIf=\\\"notification\\\">\\n      <ion-card-content>\\n        <ion-row>\\n          {{ notification }}\\n        </ion-row>\\n      </ion-card-content>\\n    </ion-card>\\n\\n  <ion-card>\\n    <ion-card-content>\\n        <ion-row>  \\n          <ion-col>\\n            <div><strong>Producto</strong></div>\\n          </ion-col>\\n          <ion-col>\\n            <div><strong>Origen</strong></div>\\n          </ion-col>\\n        \\n          <ion-col>\\n            <div><strong>Destino</strong></div>\\n          </ion-col>\\n          \\n          <ion-col>\\n            <div><strong>Cantidad.</strong></div>\\n          </ion-col>\\n        \\n          <ion-col>\\n            <div><strong>Disponible</strong></div>\\n          </ion-col>\\n        </ion-row>\\n        <ion-row *ngFor=\\\"let line of move_lines_info\\\">\\n          <ion-col>\\n            <div class=\\\"link\\\" (click)=\\\"open_link(line.product_id['id'])\\\">{{line.product_id['name']}}</div>\\n          </ion-col>\\n        \\n          <ion-col>\\n            <div>{{line.origin_location_id['name']}}</div>\\n          </ion-col>\\n        \\n          <ion-col>\\n            <div>{{line.destination_location_id['name']}}</div>\\n          </ion-col>\\n          \\n          <ion-col>\\n            <div class=\\\"link\\\" (click)=\\\"edit_qty(line.id)\\\">{{line.move_quantity}}</div>\\n          </ion-col>\\n        \\n          <ion-col>\\n            <div class=\\\"link\\\" (click)=\\\"change_qty(line.id, line.max_quantity)\\\">{{line.max_quantity}}</div>\\n          </ion-col>\\n        </ion-row>\\n    </ion-card-content>\\n  </ion-card>\\n</ion-content>\\n\\n<app-scanner-footer (scanner_reading_changed)=\\\"onReadingEmitted($event)\\\" [show_scan_form]=show_scan_form [scanner_reading]=\\\"scanner_reading\\\"></app-scanner-footer>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { StockMoveLocationPage } from './stock-move-location.page';\n\nimport { SharedModule } from '../../shared/shared.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: StockMoveLocationPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    SharedModule\n  ],\n  declarations: [StockMoveLocationPage]\n})\nexport class StockMoveLocationPageModule {}\n","module.exports = \"ion-col.link, div.link {\\n  color: blue;\\n  -webkit-text-decoration: underline blue 1px;\\n          text-decoration: underline blue 1px;\\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tpa28vaW9uaWM0L3dhcmVob3VzZV9hcGsvc3JjL2FwcC9wYWdlcy9zdG9jay1tb3ZlLWxvY2F0aW9uL3N0b2NrLW1vdmUtbG9jYXRpb24ucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9zdG9jay1tb3ZlLWxvY2F0aW9uL3N0b2NrLW1vdmUtbG9jYXRpb24ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBQTtFQUNBLDJDQUFBO1VBQUEsbUNBQUE7RUFDQSxlQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9zdG9jay1tb3ZlLWxvY2F0aW9uL3N0b2NrLW1vdmUtbG9jYXRpb24ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNvbC5saW5rLCBkaXYubGluayB7XG4gICAgY29sb3I6IGJsdWU7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmUgYmx1ZSAxcHg7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xufSIsImlvbi1jb2wubGluaywgZGl2Lmxpbmsge1xuICBjb2xvcjogYmx1ZTtcbiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmUgYmx1ZSAxcHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AlertController } from '@ionic/angular';\nimport { OdooService } from '../../services/odoo.service';\nimport { AudioService } from '../../services/audio.service';\nimport { StockService } from '../../services/stock.service';\nimport { ScannerOptions } from '../../interfaces/scanner-options';\nimport { Storage } from '@ionic/storage';\n\n@Component({\n  selector: 'app-stock-move-location',\n  templateUrl: './stock-move-location.page.html',\n  styleUrls: ['./stock-move-location.page.scss'],\n})\nexport class StockMoveLocationPage implements OnInit {\n\n  scanner_options: ScannerOptions = { reader: true, microphone: false, sound: false };\n\n  location_id: string;\n  location_dest_id: string;\n  move_lines_info: Array<[]>;\n  show_scan_form: boolean;\n  scanner_reading: string;\n  location_move_id: any;\n  awaitting_origin: boolean;\n  awaitting_destination: boolean;\n  awaitting_qty: boolean;\n  notification: string;\n  actual_line: string;\n\n  constructor(\n    private odoo: OdooService,\n    public router: Router,\n    public alertCtrl: AlertController,\n    private audio: AudioService,\n    private stock: StockService,\n    private storage: Storage\n  ) {\n    this.awaitting_origin = false;\n    this.awaitting_destination = false;\n    this.check_scanner_values();\n    this.notification = undefined;\n  }\n\n  ngOnInit() {\n    this.odoo.isLoggedIn().then((data)=>{\n      if (data==false) {\n        this.router.navigateByUrl('/login');\n      }\n      this.show_scan_form = this.scanner_options['reader'];\n    })\n    .catch((error)=>{\n      this.presentAlert('Error al comprobar tu sesión:', error);\n    });\n  }\n  \n  check_scanner_values() {\n    this.storage.get('SCANNER').then((val) => {\n      if (val){\n        this.scanner_options = val;\n      } \n    })\n    .catch((error)=>{\n      this.presentAlert('Error al acceder a las opciones del scanner:', error);\n    });\n  }\n\n  open_link(product_id){\n    this.router.navigateByUrl('/product/'+product_id);\n  }\n\n  onReadingEmitted(val: string) {\n    this.scanner_reading = val;\n    this.process_reading();\n  }\n\n  onShowEmitted(val: boolean) {\n    this.show_scan_form = val;\n  }\n\n  async presentAlert(titulo, texto) {\n    this.audio.play('error');\n    const alert = await this.alertCtrl.create({\n        header: titulo,\n        subHeader: texto,\n        buttons: ['Ok']\n    });\n    await alert.present();\n  }\n\n  edit_qty(line_id) {\n    this.actual_line = line_id;\n    this.awaitting_qty = true;\n    this.notification = \"Introduzca una cantidad para la línea\";\n  }\n\n  change_qty(line_id, qty) {\n    this.stock.change_qty(line_id, qty).then((data)=> {\n      this.update_data(data);\n      this.notification = undefined;\n    }).catch((error)=>{\n      this.presentAlert('No se ha podido modificar la ubicación:', error);\n    });\n  }\n\n  process_reading() {\n    if (this.awaitting_destination == true) {\n      this.change_location('destination', this.scanner_reading);\n    } else if (this.awaitting_origin == true) {\n      this.change_location('origin', this.scanner_reading);\n    } else if (this.awaitting_qty) {\n      this.change_qty(this.actual_line, this.scanner_reading);\n    } else if (!this.location_id) {\n      this.create_new_move_location();\n    } else {\n      this.create_new_move_location_line();\n    }\n  }\n\n  select_location(type){\n    if (type == 'origin' && this.location_move_id) {\n      this.awaitting_origin = true;\n      this.notification = \"Introduzca una nueva ubitación de origen\";\n    } else if (type == 'destination' && this.location_move_id) {\n      this.awaitting_destination = true;\n      this.notification = \"Introduzca una nueva ubitación de destino\";\n    }\n  }\n\n  change_location(type, location_id) {\n    this.stock.change_move_location(this.location_move_id, type, location_id).then((data)=> {\n      this.update_data(data);\n      this.awaitting_origin = false;\n      this.awaitting_destination = false;\n      this.notification = undefined;\n    })\n    .catch((error)=>{\n      this.presentAlert('No se ha podido modificar la ubicación:', error);\n    });\n  }\n\n  update_data(data) {\n    if(data['err'] == true) {\n      this.presentAlert('No se ha podido modificar la ubicación:', data['error']);\n    } else {\n      this.location_id = data['origin_location_id'];\n      this.location_dest_id = data['destination_location_id'];\n      this.location_move_id = data['id'];\n      this.move_lines_info = data['stock_move_location_line_ids'];\n    }\n  }\n\n  create_new_move_location() {\n    this.stock.create_new_move_location(this.scanner_reading).then((data)=>{\n      this.update_data(data);\n      this.audio.play('click');   \n    })\n    .catch((error)=>{\n      this.presentAlert('Error al recuperar la ubicación:', error);\n    });\n  }\n\n  create_new_move_location_line() {\n    this.stock.create_new_move_location_line(this.location_move_id, this.location_id['id'], this.location_dest_id['id'], this.scanner_reading).then((data:any)=>{\n      this.move_lines_info.push(data);\n      this.audio.play('click');   \n    })\n    .catch((error)=>{\n      this.presentAlert('Error al recuperar el producto:', error);\n    });\n  }\n\n  force_reset_qties() {\n    this.stock.set_multiple_move_location(this.location_move_id, 'reset').then((data)=> {\n      this.update_data(data);\n    })\n    .catch((error)=>{\n      this.presentAlert('Error al modificar las cantidades:', error);\n    });\n  }\n\n  force_set_reserved_qties() {\n    this.stock.set_multiple_move_location(this.location_move_id, 'set').then((data)=> {\n      this.update_data(data);\n    })\n    .catch((error)=>{\n      this.presentAlert('Error al modificar las cantidades:', error);\n    });\n  }\n\n  action_move_location() {\n    this.stock.action_move_location(this.location_move_id).then((data)=>{\n      console.log(data);\n      this.router.navigateByUrl('/stock-picking/'+data+'/internal');\n    })\n    .catch((error)=>{\n      this.presentAlert('Error al enviar el movimiento: ', error);\n    });\n  }\n\n}\n\n\n/* producto 827702101 */\n\n/* location 03445.19.01.01 */\n"],"sourceRoot":""}